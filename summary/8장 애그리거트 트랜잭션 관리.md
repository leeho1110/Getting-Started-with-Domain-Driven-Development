# 8장: 애그리거트 트랜잭션 관리

### 1장. 애그리거트와 트랜잭션

- 동일한 식별자를 사용하며 동일한 상태를 갖는 애그리거트를 각기 다른 객체에서 수정한다면 어떻게 될까?
    - 애그리거트가 주문 객체라고 가정하고 운영자가 배송지 주소를 수정하는 사이, 고객이 배송지 주소를 수정했다고 가정해보자.
    - 결과적으론 고객이 수정한 주소는 운영자의 수정에 덮어씌워져 반영되지 못할 것이다. 이는 애그리거트의 일관성을 훼손하는 결과다. 우린 어떻게 대처해야 할까?
        - 운영자가 조회 이후 수정을 진행하는 동안, 고객이 애그리거트를 수정하지 못하게 막을 수 있다.
        - 혹은 운영자가 조회를 시작한 뒤 언제라도 고객이 수정한다면, 기존 절차를 리셋하고 다시 조회하여 수정하게도 할 수 있다.
    - 이를 해결하기 위해선 트랜잭션 처리 기법이 필요하다. 대표적으로는 **선점(Perssimistic) 잠금과 비선점(Optimisitic) 잠금**이 존재한다. 살펴보자.

---

